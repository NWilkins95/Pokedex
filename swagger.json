{
  "openapi": "3.0.0",
  "info": {
    "title": "Gen 1 Pokedex API",
    "description": "RESTful API for managing Gen 1 Pokemon, battle teams, moves, and move validation",
    "version": "1.0.0",
    "contact": {
      "name": "API Support"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000/api",
      "description": "Development server"
    },
    {
      "url": "https://your-production-url.com/api",
      "description": "Production server"
    }
  ],
  "tags": [
    {
      "name": "Pokemon",
      "description": "Pokemon information and management"
    },
    {
      "name": "Moves",
      "description": "Move selection and validation for Pokemon"
    },
    {
      "name": "Battle Teams",
      "description": "Battle team management"
    },
    {
      "name": "Users",
      "description": "User management"
    }
  ],
  "paths": {
    "/pokemon": {
      "get": {
        "tags": ["Pokemon"],
        "summary": "Get all Pokemon",
        "description": "Retrieve a list of all Gen 1 Pokemon with optional filtering",
        "parameters": [
          {
            "name": "type",
            "in": "query",
            "description": "Filter by Pokemon type (e.g., Fire, Water, Grass)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Maximum number of Pokemon to return",
            "schema": {
              "type": "integer",
              "default": 151
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "count": {
                      "type": "integer"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Pokemon"
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/pokemon/{pokemonId}": {
      "get": {
        "tags": ["Pokemon"],
        "summary": "Get Pokemon by ID",
        "description": "Retrieve detailed information about a specific Pokemon",
        "parameters": [
          {
            "name": "pokemonId",
            "in": "path",
            "required": true,
            "description": "Pokemon ObjectId or Pokedex number",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Pokemon"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/pokemon/{pokemonId}/moves": {
      "get": {
        "tags": ["Moves"],
        "summary": "Get learnable moves for a Pokemon",
        "description": "Retrieve all moves that a Pokemon can learn at a specific level. Can optionally group moves by learning method.",
        "parameters": [
          {
            "name": "pokemonId",
            "in": "path",
            "required": true,
            "description": "Pokemon ObjectId",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "level",
            "in": "query",
            "description": "Current level of the Pokemon (1-100)",
            "schema": {
              "type": "integer",
              "default": 100,
              "minimum": 1,
              "maximum": 100
            }
          },
          {
            "name": "groupBy",
            "in": "query",
            "description": "Group moves by learning method",
            "schema": {
              "type": "string",
              "enum": ["method"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response with learnable moves",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "type": "object",
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "example": true
                        },
                        "pokemon_id": {
                          "type": "string"
                        },
                        "level": {
                          "type": "integer"
                        },
                        "moves": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/LearnableMove"
                          }
                        }
                      }
                    },
                    {
                      "type": "object",
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "example": true
                        },
                        "pokemon_id": {
                          "type": "string"
                        },
                        "level": {
                          "type": "integer"
                        },
                        "moves": {
                          "type": "object",
                          "properties": {
                            "start": {
                              "type": "array",
                              "items": {
                                "$ref": "#/components/schemas/LearnableMove"
                              }
                            },
                            "level-up": {
                              "type": "array",
                              "items": {
                                "$ref": "#/components/schemas/LearnableMove"
                              }
                            },
                            "tm": {
                              "type": "array",
                              "items": {
                                "$ref": "#/components/schemas/LearnableMove"
                              }
                            },
                            "hm": {
                              "type": "array",
                              "items": {
                                "$ref": "#/components/schemas/LearnableMove"
                              }
                            },
                            "tutor": {
                              "type": "array",
                              "items": {
                                "$ref": "#/components/schemas/LearnableMove"
                              }
                            }
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/battle-team": {
      "get": {
        "tags": ["Battle Teams"],
        "summary": "Get all battle teams",
        "description": "Retrieve all battle teams, optionally filtered by user",
        "parameters": [
          {
            "name": "userId",
            "in": "query",
            "description": "Filter by user ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "count": {
                      "type": "integer"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/BattleTeam"
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      },
      "post": {
        "tags": ["Battle Teams"],
        "summary": "Create a new battle team",
        "description": "Create a new battle team for a user",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateBattleTeamRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Battle team created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/BattleTeam"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/battle-team/{teamId}": {
      "get": {
        "tags": ["Battle Teams"],
        "summary": "Get battle team by ID",
        "description": "Retrieve a specific battle team with full Pokemon and move details",
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "required": true,
            "description": "Battle team ObjectId",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/BattleTeam"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      },
      "put": {
        "tags": ["Battle Teams"],
        "summary": "Update battle team",
        "description": "Update battle team information (name or Pokemon)",
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "required": true,
            "description": "Battle team ObjectId",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateBattleTeamRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Battle team updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/BattleTeam"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      },
      "delete": {
        "tags": ["Battle Teams"],
        "summary": "Delete battle team",
        "description": "Delete a battle team",
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "required": true,
            "description": "Battle team ObjectId",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Battle team deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/battle-team/{teamId}/pokemon/{pokemonIndex}/moves": {
      "post": {
        "tags": ["Moves"],
        "summary": "Set moves for Pokemon in battle team",
        "description": "Set or update moves for a specific Pokemon in a battle team with validation. Validates that the Pokemon can learn all selected moves at their current level and enforces the 4-move limit.",
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "required": true,
            "description": "Battle team ObjectId",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "pokemonIndex",
            "in": "path",
            "required": true,
            "description": "Index of Pokemon in the team (0-5)",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "maximum": 5
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["moveIds"],
                "properties": {
                  "moveIds": {
                    "type": "array",
                    "minItems": 1,
                    "maxItems": 4,
                    "items": {
                      "type": "string",
                      "description": "Move ObjectId"
                    },
                    "example": ["507f1f77bcf86cd799439011", "507f1f77bcf86cd799439012"]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Moves updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Moves updated successfully"
                    },
                    "team": {
                      "$ref": "#/components/schemas/BattleTeam"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error - Pokemon cannot learn one or more moves",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Pokemon cannot learn the following moves at level 25"
                    },
                    "invalidMoves": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "move_id": {
                            "type": "string"
                          },
                          "move_name": {
                            "type": "string"
                          },
                          "reason": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/users": {
      "get": {
        "tags": ["Users"],
        "summary": "Get all users",
        "description": "Retrieve a list of all users",
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "count": {
                      "type": "integer"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/User"
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      },
      "post": {
        "tags": ["Users"],
        "summary": "Create a new user",
        "description": "Register a new user",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateUserRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/users/{userId}": {
      "get": {
        "tags": ["Users"],
        "summary": "Get user by ID",
        "description": "Retrieve a specific user",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "description": "User ObjectId",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/moves": {
      "get": {
        "tags": ["Moves"],
        "summary": "Get all moves",
        "description": "Retrieve a list of all Gen 1 moves with optional filtering",
        "parameters": [
          {
            "name": "type",
            "in": "query",
            "description": "Filter by move type",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "category",
            "in": "query",
            "description": "Filter by move category",
            "schema": {
              "type": "string",
              "enum": ["Physical", "Special", "Status"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "count": {
                      "type": "integer"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Move"
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/moves/{moveId}": {
      "get": {
        "tags": ["Moves"],
        "summary": "Get move by ID",
        "description": "Retrieve detailed information about a specific move",
        "parameters": [
          {
            "name": "moveId",
            "in": "path",
            "required": true,
            "description": "Move ObjectId",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Move"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Pokemon": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "example": "507f1f77bcf86cd799439011"
          },
          "pokedex_number": {
            "type": "integer",
            "example": 25
          },
          "name": {
            "type": "string",
            "example": "Pikachu"
          },
          "types": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "example": ["Electric"]
          },
          "base_stats": {
            "type": "object",
            "properties": {
              "hp": {
                "type": "integer",
                "example": 35
              },
              "attack": {
                "type": "integer",
                "example": 55
              },
              "defense": {
                "type": "integer",
                "example": 40
              },
              "special_attack": {
                "type": "integer",
                "example": 50
              },
              "special_defense": {
                "type": "integer",
                "example": 50
              },
              "speed": {
                "type": "integer",
                "example": 90
              }
            }
          },
          "evolution": {
            "type": "object",
            "properties": {
              "evolves_from": {
                "type": "string",
                "nullable": true,
                "example": "507f1f77bcf86cd799439010"
              },
              "evolves_to": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "example": ["507f1f77bcf86cd799439012"]
              },
              "evolution_method": {
                "type": "string",
                "example": "thunder-stone"
              }
            }
          },
          "abilities": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "example": ["Static", "Lightning Rod"]
          },
          "height": {
            "type": "number",
            "description": "Height in meters",
            "example": 0.4
          },
          "weight": {
            "type": "number",
            "description": "Weight in kilograms",
            "example": 6.0
          }
        }
      },
      "Move": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "example": "507f1f77bcf86cd799439020"
          },
          "name": {
            "type": "string",
            "example": "Thunderbolt"
          },
          "type": {
            "type": "string",
            "example": "Electric"
          },
          "category": {
            "type": "string",
            "enum": ["Physical", "Special", "Status"],
            "example": "Special"
          },
          "power": {
            "type": "integer",
            "nullable": true,
            "example": 90
          },
          "accuracy": {
            "type": "integer",
            "nullable": true,
            "example": 100
          },
          "pp": {
            "type": "integer",
            "example": 15
          },
          "effect": {
            "type": "string",
            "example": "10% chance to paralyze the target"
          }
        }
      },
      "BattleTeam": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "example": "507f1f77bcf86cd799439030"
          },
          "user_id": {
            "type": "string",
            "example": "507f1f77bcf86cd799439040"
          },
          "team_name": {
            "type": "string",
            "example": "Elite Four Team"
          },
          "pokemon": {
            "type": "array",
            "minItems": 1,
            "maxItems": 6,
            "items": {
              "type": "object",
              "properties": {
                "pokemon_id": {
                  "type": "string",
                  "example": "507f1f77bcf86cd799439011"
                },
                "nickname": {
                  "type": "string",
                  "nullable": true,
                  "example": "Sparky"
                },
                "level": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 100,
                  "example": 50
                }
              }
            }
          },
          "moves_chosen": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "pokemon_index": {
                  "type": "integer",
                  "example": 0
                },
                "moves": {
                  "type": "array",
                  "maxItems": 4,
                  "items": {
                    "type": "string",
                    "example": "507f1f77bcf86cd799439020"
                  }
                }
              }
            }
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "User": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "example": "507f1f77bcf86cd799439040"
          },
          "username": {
            "type": "string",
            "example": "ash_ketchum"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "ash@pokemon.com"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "LearnableMove": {
        "type": "object",
        "properties": {
          "move_id": {
            "type": "string",
            "example": "507f1f77bcf86cd799439020"
          },
          "move_name": {
            "type": "string",
            "example": "Thunderbolt"
          },
          "type": {
            "type": "string",
            "example": "Electric"
          },
          "category": {
            "type": "string",
            "enum": ["Physical", "Special", "Status"],
            "example": "Special"
          },
          "power": {
            "type": "integer",
            "nullable": true,
            "example": 90
          },
          "accuracy": {
            "type": "integer",
            "nullable": true,
            "example": 100
          },
          "pp": {
            "type": "integer",
            "example": 15
          },
          "learn_method": {
            "type": "string",
            "enum": ["start", "level-up", "tm", "hm", "tutor"],
            "example": "tm"
          },
          "level_learned": {
            "type": "integer",
            "nullable": true,
            "example": null
          },
          "tm_hm_number": {
            "type": "integer",
            "nullable": true,
            "example": 24
          }
        }
      },
      "CreateBattleTeamRequest": {
        "type": "object",
        "required": ["user_id", "team_name", "pokemon"],
        "properties": {
          "user_id": {
            "type": "string",
            "example": "507f1f77bcf86cd799439040"
          },
          "team_name": {
            "type": "string",
            "example": "Elite Four Team"
          },
          "pokemon": {
            "type": "array",
            "minItems": 1,
            "maxItems": 6,
            "items": {
              "type": "object",
              "required": ["pokemon_id", "level"],
              "properties": {
                "pokemon_id": {
                  "type": "string",
                  "example": "507f1f77bcf86cd799439011"
                },
                "nickname": {
                  "type": "string",
                  "example": "Sparky"
                },
                "level": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 100,
                  "example": 50
                }
              }
            }
          }
        }
      },
      "UpdateBattleTeamRequest": {
        "type": "object",
        "properties": {
          "team_name": {
            "type": "string",
            "example": "Updated Team Name"
          },
          "pokemon": {
            "type": "array",
            "minItems": 1,
            "maxItems": 6,
            "items": {
              "type": "object",
              "properties": {
                "pokemon_id": {
                  "type": "string"
                },
                "nickname": {
                  "type": "string"
                },
                "level": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 100
                }
              }
            }
          }
        }
      },
      "CreateUserRequest": {
        "type": "object",
        "required": ["username", "email"],
        "properties": {
          "username": {
            "type": "string",
            "example": "ash_ketchum"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "ash@pokemon.com"
          }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "error": {
            "type": "string",
            "example": "An error occurred"
          }
        }
      }
    },
    "responses": {
      "NotFound": {
        "description": "Resource not found",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "success": {
                  "type": "boolean",
                  "example": false
                },
                "error": {
                  "type": "string",
                  "example": "Resource not found"
                }
              }
            }
          }
        }
      },
      "BadRequest": {
        "description": "Bad request - validation error",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "success": {
                  "type": "boolean",
                  "example": false
                },
                "error": {
                  "type": "string",
                  "example": "Validation error"
                }
              }
            }
          }
        }
      },
      "ServerError": {
        "description": "Internal server error",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      }
    }
  }
}
